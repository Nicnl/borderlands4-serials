package helpers

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestBinToBytes(t *testing.T) {
	tests := []struct {
		bin      string
		expected []byte
	}{
		// Normal cases
		{"00000000", []byte{0b00000000}},
		{"00000001", []byte{0b00000001}},
		{"00000010", []byte{0b00000010}},
		{"00000011", []byte{0b00000011}},
		{"11111111", []byte{0b11111111}},
		{"0000000011111111", []byte{0b00000000, 0b11111111}},
		{"1111111100000000", []byte{0b11111111, 0b00000000}},
		{"1010101010101010", []byte{0b10101010, 0b10101010}},
		{"110011001100110011001100", []byte{0b11001100, 0b11001100, 0b11001100}},

		// Custom separators
		{"0: {00} 000-00", []byte{0b00000000}},
		{"0: {00} 000-01", []byte{0b00000001}},
		{"0: {00} 000-10", []byte{0b00000010}},
		{"0: {00} 000-11", []byte{0b00000011}},
		{"1: {11} 111-11", []byte{0b11111111}},
		{"0: {00} 000-00  = 11111111", []byte{0b00000000, 0b11111111}},
		{"1: {11} 111-110 = 0000000", []byte{0b11111111, 0b00000000}},
		{"1: {01} 010-1010+++101010", []byte{0b10101010, 0b10101010}},
		{"1: {10} 011-001100 : 11,0,01,1,001|100", []byte{0b11001100, 0b11001100, 0b11001100}},
	}

	for _, tt := range tests {
		t.Run(tt.bin, func(t *testing.T) {
			result := BinToBytes(tt.bin)
			assert.Equal(t, tt.expected, result)
		})
	}
}
